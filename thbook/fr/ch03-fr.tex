\eject
\vbox{\hsize=93.2mm\baselineskip=12pt
\rightline{\eightit Nous marchons tous les deux et ne marchons pas dans les mêmes rivières.}
\pic{herakl.pdf}
\vskip1pt
\eightrm 
\rightline{---Heraclitus of Ephesus, {\eightmit 6}$^{ème}$/{\eightmit 5}$^{ème}$ siècle av-JC}
}


\chapter Traitement des données.

Outre les fichiers de données contenant des données du relevé, Therion utilise un fichier de configuration contenant des instructions sur la présentation des données.

\subchapter Fichier de configuration.

Le nom de fichier de configuration peut être donné comme argument à Therion. 
Par défaut, Therion recherche le fichier nommé |thconfig| dans le répertoire de travail en cours. 
Il se lit comme tout autre fichier Therion (c’est-à-dire une commande par ligne ; les lignes vides ou commençant par `|#|' sont ignorées ; 
les lignes terminées par une barre oblique inversée (backslash) se poursuivent à la ligne suivante). 
Une liste des commandes actuellement prises en charge est donnée ci-après :

\subsubchapter `system'.

Permet d'exécuter des commandes système lors de la compilation de Therion.\[Par exemple pour ouvrir ou refresh un lecteur PDF externe.] 
Normalement, Therion attend que le sous-processus soit terminé. 
Si vous souhaitez continuer la compilation sans interruption, utilisez l’expression |<command> &| sous Linux et l’expression |<command>| sous Windows.

\subsubchapter `encoding'.

|encoding| fonctionne comme la commande d'encodage dans les fichiers de données---il spécifie les jeux de caractères. 

\subsubchapter `language'.
\syntax
  \list
    * |language <xx_[YY]>| 
  \endlist
\endsyntax

\NEW{5.3}Définit la langue de sortie pour les textes traduisibles.

\subsubchapter `cs'.

\syntax
  \list
    * |cs <systeme de coordonnees>| 
  \endlist
\endsyntax

\NEW{5.3}En dehors du bloc |layout|, la commande spécifie le système de coordonnées de l'export.
Il n'est pas possible de spécifier différents systèmes de coordonnées pour différents exports 
(La dernière occurence de |cs| est utilisée pour tous les exports).

Si |cs| n'est pas définie dans le fichier de configuration, alors, la première commande |cs| trouvée par therion lors de la lecture des données sera utilisée pour les exports.

A l'intérieur d'un |layout|, cette option spécifie le système de coordonnées pour la localisation des données associées (|origin|, 
|grid-origin|).

\subsubchapter `sketch-warp'.

\syntax
  \list
    * |sketch-warp <algorithm>| 
  \endlist
\endsyntax

Spécifie quel algorithme de morphing utiliser pour déformer les scraps.
Plusieurs algorithmes sont possibles : |line|---par défaut ; |plaquette|---inventé par Marco Corvi.

\subsubchapter `input'.

Fonctionne comme la commance |input| dans les fichiers de données---Inclus d'autres fichiers

\subsubchapter `source'.

\description
   Spécifie les fichiers sources (données) que Therion doit lire. 
   Vous pouvez spécifier plusieurs fichiers ici ; 
   un par ligne. Vous pouvez également les spécifier à l'aide de l'option de ligne de commande |-s| (voir ci-dessous).   Il est également possible de taper (quelques petits extraits de code) directement dans le fichier de configuration en utilisant la syntaxe multiligne.
   
\enddescription

\syntax
  \hfill\break|source <nom_de_fichier>|\hfill\break
  or\hfill\break
  |source|\hfill\break
  {\qquad\it\dots therion commands\dots}\hfill\break
  |endsource|
\endsyntax

\arguments
*  |<nom_de_fichier>| 
\endarguments

\subsubchapter `select'.

\description
  Sélectionne les objets (relevés et dessins) à exporter. 
  Par défaut, tous les objets du relevé sont sélectionnés. 
  Si aucune topographie n'est sélectionnée, toutes les notes provenant des topographies sélectionnées sont sélectionnées par défaut pour l'exportation de la topographie.  S'il n'y a pas de scraps ou de topos dans les données, la ligne de cheminement de toutes les topographies est exportée dans la topographie.\[ATTENTION : 
  s'il y a énormément de données, ce qui est le cas, avec des cavités ou des systèmes à fort développement, la mémoire est rapidement saturée
  et le compilation crashe.]  Lorsque vous exportez des topographies dans différentes projections, vous devez les sélectionner séparément pour chaque projection
  
\enddescription

\syntax
  |select <object> [OPTIONS]|
\endsyntax

\arguments
*  |<object>| = tout relevé ou topographie identifiés par leur identifiant ID.
\endarguments

\options
  * |recursive <on/off>| = valide uniquement lorsqu'une topographie est sélectionnée. Si cette option est activée (par défaut), 
                                       tous les sous-niveaux du relevé donné sont sélectionnés / désélectionnés de manière récursive.
  
  * |map-level <number>| = valide uniquement lorsqu'une topo est sélectionnée. 
                                           Détermine le niveau auquel l'extension de la topographie pour l'exportation d'atlas est arrêtée. 
                                           Par défaut, 0 est utilisé. si `basic' est spécifié, l’extension se fait jusqu’aux topographies de base. 
                                           {\it Remarque :} les aperçus de ne sont affichés que comme spécifié dans les topographies du |map-level| en cours.

  * |chapter-level <number>| = valide uniquement lorsqu'une topographie est sélectionnée. 
                                                Détermine le niveau (level) auquel, lors de l'exportation de l’atlas, l'extension de chapitre sera stoppée. 
                                                Par défaut, 0 est utilisé. Si vous spécifiez `|-|' ou `|.|', aucun chapitre n’est exporté pour cette topographie. 
                                                Si l'option de pages de titre (|title-pages|) de la mise en page (|layout| ) est activée, chaque chapitre commence par une page de titre.
  
  \endoptions



\subsubchapter `unselect'.

\description
  Désélectionne les objets à exporter.
\enddescription

\syntax
  |unselect <object> [OPTIONS]|
\endsyntax

\arguments
  Identique à la commande |select|.
\endarguments

\options
  Identique à la commande |select|.
\endoptions


\subsubchapter `text'.

\description
  Spécifie la traduction de tout texte Therion par défaut dans le fichier de sortie.
\enddescription

\syntax
  |text <language ID> <texte therion> <mon texte>|
\endsyntax

\arguments
*  |<language ID>| = identifiant de langue ISO standard (par exemple |fr|, |en| ou |en_GB|)
*  |<therion text>| = texte Therion à traduire. Pour une liste des textes Therion et des traductions disponibles, voir le fichier |thlang/texts.txt|.
\endarguments


\subsubchapter `layout'.

\description
  Spécifie les caractéristiques de mise en page de l'export pour les topographies 2D. Les settings qui s'appliquent au mode atlas 
  sont marqués  `A' ; au mode map `M'.
\enddescription

\syntax
|layout <id> [OPTIONS]
    copy <source layout id>
    cs <systeme de coordonnees>
    north <true/grid>
    scale <longueur sur l'image> <longueur reele>
    base-scale <longueur sur l'image> <longueur reele>
    units <metric/imperial>
    rotate <nombre>
    symbol-set <symbol-set>
    symbol-assign <point/line/area/group/special> <symbol-type> \ 
                                                  <symbol-set>
    symbol-hide <point/line/area/group/special> <symbol-type>
    symbol-show <point/line/area/group/special> <symbol-type>
    symbol-colour <point/line/area/group/special> <symbol-type> <colour>
    min-symbol-scale <scale>
    fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>
    size <width> <height> <units>
    overlap <valeur> <unites>
    page-setup <dimensions> <uniets>
    page-numbers <on/off>
    exclude-pages <on/off> <liste_des_pages>
    title-pages <on/off>
    nav-factor <facteur>
    nav-size <x-size> <y-size>
    transparency <on/off>
    opacity <valeur>
    surface <top/bottom/off>
    surface-opacity <valeur>
    sketches <on/off>
    layers <on/off>
    grid <off/top/bottom>
    grid-origin <x> <y> <x> <unites>
    grid-size <x> <y> <z> <unites>
    grid-coords <off/border/all>
    origin <x> <y> <z> <unites>
    origin-label <x-label> <y-label>
    own-pages <nombre>
    page-grid <on/off>
    legend <on/off/all>
    legend-columns <nombre>
    legend-width <n> <unites>
    map-comment <string>
    map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>
    map-header-bg <on/off>
    map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <nom_de_fichier>
    statistics <explo/topo/carto/copyright all/off/nombre>
               <explo/topo-length on/off>
    scale-bar <longueur> <unites>
    survey-level <N/all>
    language <xx[_YY]>
    colour/color <item> <couleur>
    debug <on/all/first/second/scrap-names/station-names/off>
    doc-author <string>
    doc-keywords <string>
    doc-subject <string>
    doc-title <string>
    code <metapost/tex-map/tex-atlas>
    endcode
endlayout|
\endsyntax

\arguments
  |<id>| = identifiant du layout (utilisé par la commande |export|)
\endarguments

\comopt 
  * |copy <source layout id>| = définissez ici les propriétés qui ne sont pas modifiées en fonction de la présentation source donnée |layout|.
  
  {\it map presentation-related:}\Nobreak

  * |scale <picture length> <real length>| = set scale of
    output map or map atlas (M, A; default: |1 200|)
  * |base-scale <picture length> <real length>| = if set, Therion will
    optically scale the map by a (|scale/base-scale|) factor.
    This has the same effect as if the map printed in |base-scale| would be
    photo-reduced to the |scale|. (M, A)
  * |rotate <value>| = rotates the map (M, A; default: |0|)
  * |units <metric/imperial>| = set output units (M, A; default: |metric|)
  * |symbol-set <symbol-set>| = use |symbol-set| for all map symbols,
    if available. Be aware, that symbol set name is case sensitive. (M, A)
    
    Therion uses following predefined symbol sets:\par
    UIS (International Union of Speleology)\par
    ASF (Australian Speleological Federation)\par
    AUT (Austrian Speleological Association)\par
    CCNP (Carlsbad Caverns National Park)\NEW{5.4}\par
    NZSS (New Zealand Symbol Set)\NEW{5.4}\par
    SKBB (Speleoklub Bansk\'a Bystrica)
    
  * {\rightskip 0cm minus 4pt
    |symbol-assign <point/line/area/group/special> <symbol-type> <symbol-set>| = 
    display a
    particular symbol in the given symbol-set. This option overrides 
    |symbol-set| option.\par}
    
    If the symbol has a subtype, |<symbol-type>| argument may have one
    of the following forms: |type:subtype| or simply |type|, which
    assigns new symbol set to all subtypes of a given symbol.
    
    Following symbols may not be used with this option: point {\it section} 
    (which isn't rendered at all) and all point and line labels ({\it label}, 
    {\it remark}, {\it altitude}, {\it height}, {\it passage-height}, 
    {\it station-name}, {\it date}). See the chapter
    {\it Changing layout/Customizing text labels} for details how to change
    labels' appearance. (M, A)

    Group may be one of the following: all, centerline, sections, \NEW{5.3}water,
    speleothems, passage-fills, \NEW{5.4}ice, sediments, equipment.
    
    There are two special symbols: north-arrow, scale-bar.

  * |symbol-hide <point/line/area/group/special>  <symbol-type>| = don't display 
    particular symbol or group of symbols. 
    
    You may use |group cave-centerline|, |group surface-centerline|, 
    |point cave-station|, |point surface-station|
    and \NEW{5.4}|group text|
    in |symbol-hide| and |symbol-show| commands.
    
    Use |flag:<entrance/continuation/sink/spring/doline/dig>| as a 
    |<symbol-type>| to hide stations with particular flags 
    (e.g. |symbol-hide point flag:entrance|).
    
    May be combined with |symbol-show|.(M, A)
  * |symbol-show <point/line/area/group/special> <symbol-type>| = display particular 
    symbol or group of symbols. May be combined with |symbol-hide|. (M, A)

  * \NEW{5.3}|symbol-colo[u]r <point/line/area/group/special> <symbol-type> <colour>| = 
    change colour of particular symbol or group of symbols.\[Note: colour change
    currently applies to pattern fills only if (1) output format is PDF and
    (2)~\MP\ version is at least 1.000] (M, A)

  * \NEW{5.4.1}|min-symbol-scale <scale>| = 
    define minimal |<scale>|, from which points and lines are displayed on the map. E.g. for
    |min-symbol-scale M|, no points or lines scaled |S| and |XS| will be shown on the map.
    |<scale>| has the same format, as |scale| option for points and lines.

  * \NEW{5.4.1}|fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>| =
    specify size of the text in points. 
    |<normalsize>| applies to point label, |<smallsize>| applies to 
    remark and all other point labels. Each of them may apply to line label 
    according to its |-size| option.
    
    The defaults are 
    |8 10 12 16 24| for scales upto 1:100; 
    |7 8 10 14 20| for scales upto 1:200; 
    |6 7 8 10 14| for scales upto 1:500 and 
    |5 6 7 8 10| for scales smaller than 1:500.

  {\it page layout related:}\Nobreak

  * |size <width> <height> <units>| = set map size in the atlas mode. If
    not specified, it will be calculated from |page-setup| and |overlap|.
    In map mode applies iff |page-grid| is |on| (M, A; default: |18 22.2 cm|)
  * |overlap <value> <units>| = set overlap size in paper units in the atlas 
    mode or map margin in the map mode (M, A; default: |1 cm|)
  * |page-setup <dimensions> <units>| = set page dimensions in
    this order: paper-width, paper-height, page-width, page-height,
    left-margin and top-margin. If not specified, it will be computed
    from |size| and |overlap| (A; default: |21 29.7 20 28.7 0.5 0.5 cm|)
  * |page-numbers <on/off>| = turn on/off page numbering (A; default: |true|)
  * |exclude-pages <on/off> <list>| = exclude specified pages from cave
    atlas. The list may contain page numbers separated by a comma or dash 
    (for intervals) e.g.~|2,4-7,9,23| means, that pages 2, 4, 5, 6, 7, 9 and 23 
    should be omitted. Only the map pages should be counted. (Set |own-pages 0| 
    and |title-pages off| to get the correct page numbers to be excluded.) 
    Changes of |own-pages| or |title-pages| options don't affect page 
    excluding. (A)
  * |title-pages <on/off>| = turn on/off title pages before each atlas chapter
    (A; default: |off|)
  * |nav-factor <factor>| = set atlas navigator zoom factor (A; default: |30|)
  * |nav-size <x-size> <y-size>| = set number of atlas pages in 
    both directions of navigator (A; default: |2 2|)
  * |transparency <on/off>| = set transparency for the passages (underlying 
    passages are also visible) (M, A; default: |on|)
  * |opacity <value>| = set opacity value (used if |transparency| is |on|). 
    Value range is 0--100. (M, A; default: |70|)
  * |surface-opacity <value>| = set the surface bitmap opacity (used if 
    |transparency| is |on|).  Value range is 0--100. (M, A; default: |70|)
  * |surface <top/bottom/off>| = set the position of the surface bitmap
    above/below the map. (M, A; default: |off|)
  * |sketches <on/off>| = turn on/off displaying of morphed sketch bitmaps. 
    (M, A; default: |off|)
  * |layers <on/off>| = enable/disable PDF~1.5 layers (M, A; default: |on|)
  * |grid <off/bottom/top>| = enable/disable grid (optionally coordinates' 
    values may be also displayed)
    (M, A; default: |off|)
  * |cs <coordinate system>| = coordinate system for |origin| and
    |grid-origin|
  * |north <true/grid>| = specify default orientation of the map. 
    By default, true (astronomical) north is used. It is ignored when used with
    local coordinate system.
  * |grid-origin <x> <y> <x> <units>| = set coordinates of grid
    origin (M, A)
  * |grid-size <x> <y> <z> <units>| = set grid size in real
    units (M, A; default is equal to scalebar size)
  * |grid-coords <off/border/all>| = specify where to label grid with
    coordinates. (M, A; default: |off|)
  * |origin <x> <y> <z> <units>| = set origin of atlas pages (M, A)
  * |origin-label <x-label> <y-label>| = set label for atlas page
    which has the lower left corner at the given origin coordinates.
    May be either a number or a character. (M, A; default: |0 0|)
  * |own-pages <number>| = set number of own pages added before 
    the first page of automatically generated pages in atlas mode
    (currently required for correct page numbering) (A; default: |0|)
  * |page-grid <on/off>| = show pages key plan (M; default: |off|)

  {\it map legend related:}\Nobreak

  * |map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>| = 
    print map header at location specified by |<x> <y>|. 
    Predefined map header contains some basic information about
    cave: name, scale, north arrow, list of surveyors etc. It is fully 
    customizable (see the chapter {\it Changing layout} for details).
    |<x>| is easting (left-right on page). |<y>| is northing (up/down page).
    Ranges for |<x>| and |<y>| are -100--200. Lower-left corner of the map 
    is |0 0|, 
    upper-right corner is |100 100|. The header is aligned with the specified 
    corner or side to this anchor point.
    (M; default: |0 100 nw|)
  * |map-header-bg <on/off>| = when on, background of map 
     header is filled with background color (e.g.~to hide map grid). 
     (M; default: off)
  * |map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <filename>| = 
    include image\[Note that you can include PDF too, which may be used to
    combine plan and extended elevation into one nice looking PDF file.] specified
    by |<filename>| into map at location specified by |<x> <y>|. For coordinates 
    and alignment details, see |map-header| specification.
  * |legend-width <n> <units>| = legend width (M, A; default: |14 cm|)
  * |legend <on/off/all>| = display list of used map symbols in the map header. 
    If set to |all|, all symbols from the current symbol set are displayed. 
    (M, A; default: |off|)
  * |colo[u]r-legend <on/off>| = turn on/off legend of map-fg colours 
    when map-fg is set to altitude, scrap or map (M, A)
  * |legend-columns <number>| = adjusts the number of legend columns 
    (M, A; default: |2|)
  * |map-comment <string>| = optional comment displayed at the map header (M)
  * |statistics <explo/topo/carto/copyright all/off/number>| or 
  * |statistics <explo/topo-length on/hide/off>| = display some basic 
    statistics; if set to off, team members are sorted \NEW{5.4}alphabetically;
    otherwise according to their contribution to exploration and surveying
    (M, A; default: |off|)
  * |scale-bar <length> <units>| = set the length of the scale-bar (M, A)
  * |language <xx[_YY]>| = set output language. 
    Available languages are listed on the copyright page.
    See the {\it Appendix} if 
    you want to  add or customize translations. (M, A)
  * |colo[u]r <item> <colour>| = customize colour for special map
    items (map-fg, map-bg, preview-above, preview-below, label). 
    Colour range is 0--100 for grayscale, [0--100 0--100 0--100] triplet
    for RGB colours. 
    
    For |map-fg|, you can use |altitude|, |scrap| or |map| as colours. 
    In this case the map is coloured according to altitude, scraps or maps.

    For |map-bg|, you can use |transparent| to omit page background 
    completely. 

    For labels, you can switch colour |on/off|. If |on|, labels are coloured
    using the colour of associated scrap.
    
  * |debug <on/all/first/second/scrap-names/station-names/off>| = 
    draw scrap in different stages
    of transformation in different colours to see how Therion distorts
    map data. See the description of |scrap| command for details.
    The points with distance changed most during transformation are displayed
    orange. If |scrap-names| is specified, scrap names are shown for each scrap,
    |station-names| displays name of each survey station.
  * |survey-level <N/all>| = |N| is the number of survey levels displayed 
                             next to the station name (M, A; default: |0|).

  {\it PDF related:}\Nobreak

  * |doc-author <string>| = set document author (M, A)
  * |doc-keywords <string>| = set document keywords (M, A)
  * |doc-subject <string>| = set document subject (M, A)
  * |doc-title <string>| = set document title (M, A)

  {\it customization:}\Nobreak

  * |code <metapost/tex-map/tex-atlas>| = Add/redefine \TeX\ and \MP\
    macros here. This allows user to configure various things 
    (like user defined symbols, map and atlas layout at one place \&c.)
    See the chapter {\it Changing layout} for details.
  * |endcode| = should end the TeX\ and \MP\ sections
\endcomopt

\midinsert
%  \ifx\pdfoutput\undefined\else
%    \pdfximage {pic/page.pdf}%
%  \fi
%  \vbox to 482bp{\centerline{\hbox to 400bp{%
%    \ifx\pdfoutput\undefined
%      \epsfbox{mp/page.1}%
%    \else
%      \rlap{\pdfrefximage\pdflastximage}%
%      \convertMPtoPDF{mp/page.1}{1}{1}
%    \fi
%    \hss}}\vss
%  }
  \vbox to 482bp{\centerline{\hbox to 400bp{%
      \rlap{\pic{page.pdf}}%
      \MPpic{page.1}
    \hss}}\vss
  }
\endinsert


\subsubchapter `setup3d'.

\syntax
  \list
    * |setup3d <value>| 
  \endlist
\endsyntax

\NEW{5.3}Temporary hack to set sampling distance in meters when generating 
piecewise linear 3d model from passage walls made of B\'ezier curves.


\subsubchapter `sketch-colors'.

\syntax
  \list
    * |sketch-colors <number-of-colors>| 
  \endlist
\endsyntax

\NEW{5.4} This option can be used to reduce size of sketch bitmap 
  images in maps.


\subsubchapter `export'.

\description
  Exports selected surveys or maps. 
\enddescription

\syntax
  \list
    * |export <type> [OPTIONS]| 
  \endlist
\endsyntax

\arguments
  * |<type>| = The following export types are supported:

    |model| = 3D model of the cave

    |map| = one page 2D map

    |atlas| = 2D atlas in more pages
    
    |cave-list| = summary table of caves
    
    |survey-list| = summary table of surveys
    
    |continuation-list| = list of possible continuations

    |database| = SQL database with centreline
\endarguments

\penalty0

\options
  {\it common:}\Nobreak
  * |encoding/enc <encoding>| = set output encoding
  * |output/o <file>| = set output file name. If no file name is
    given the prefix ``|cave.|'' is used with an extension corresponding to
    output format.
    
    If the output filename is given and no output format is specified,
    the format is determined from the filename extension.


  {\it model:}\Nobreak

  * |format/fmt <format>| = set model output format. Currently the following
    output formats are supported: |loch| (native format; default),
    |compass| (plt file), |survex| (3d file), |dxf|,
    |esri| (3d shapefiles), |vrml|, |3dmf| and |kml| (Google Earth).
  * |enable <walls/[cave/surface-]centerline/splay-shots/surface/all>| and
  * |disable <walls/[cave/surface-]centerline/splay-shots/surface/all>| = 
     \hfil\break
     selects which features to export, if the format supports it. Surface
     is currently exported in |therion| format only.
  * |wall-source <maps/centerline/all>| = set source data for passage
    wall modeling.

  {\it map/atlas:}\Nobreak
  
  * |format/fmt <format>| = set map format. Currently |pdf|, |svg|, 
    |xhtml|\[SVG embedded in XHTML file which contains also legend],
    |survex|, |dxf|, |esri|\[ESRI shapefiles. Multiple files are written to a 
    directory with the specified filename.], |kml| (Google Earth), 
    |xvi|\[Xtherion vector image. XVI images may be used in
    xtherion to draw in-scale maps. Scale (100\,DPI image resolution is 
    assumed) and grid-size from layout are used in export.] and
    \NEW{5.3}|bbox|\[Text file containing geographic coordinates of 
    lower-left and upper-right corners of the map area.]
    for map; |pdf| for atlas are supported.
  * |projection <id>| = unique identifier that specifies the map projection type.
    (See the |scrap| command for details.) 
    
    If there is no map defined, all scraps in the given projection are 
    exported.
    
    If there are no scraps with 
    the specified projection then Therion will display centreline from selected
    surveys.
  * |layout <id>| = use predefined map or atlas layout.
  * |layout-xxx| = where |xxx| stands for other layout options. Using this
    you can change some layout properties directly within the export command.
  * |encoding/enc <encoding>| = set output encoding

  {\it common for lists:}\Nobreak

  * |format/fmt <format>| = set continuation output format. Currently the following
    output formats are supported: |html| (default), |txt|,
    \NEW{5.4}|kml|\[For cave-list and continuation-list.] and |dbf|.
    
  {\it continuation-list:}\Nobreak

  * |attributes <(on)/off>| = set whether to export user defined attributes
    in continuation list table.
  * \NEW{5.3}|filter <(on)/off>| = set whether continuations without comment/text
    should be filtered out.

  {\it cave-list:}\Nobreak

  * |location <on/(off)>| = set whether to export coordinates of cave entrances in
    the table.
  * \NEW{5.3}|surveys (on)/off| = exports raw list of caves when set |off|. Otherwise 
    survey structure with aggregated ststistics is also displayed.
    
  {\it database:}\Nobreak
  
  * |format/fmt <format>| = currently |sql| and |csv|
  * |encoding/enc <encoding>| = set output encoding
\endoptions

{\it File formats summary:}
\nobreak\medskip
\bgroup
\leavevmode\kern1em\vbox{\advance\hsize-1em\halign{#\hfil\quad&#\hfil\cr
{\it export type}&{\it available formats}\cr\noalign{\smallskip\hrule\smallskip}
model & loch, dxf, esri, compass, survex, vrml, 3dmf, kml\cr
map  & pdf, svg, xhtml, dxf, esri, survex, xvi, kml, \NEW{5.3}bbox\cr
atlas & pdf\cr
database & sql, \NEW{5.4}csv\cr
lists & html, txt, kml, dbf\cr}}\egroup


\subchapter Running Therion.

Now, after mastering data and configuration files, we're ready to run Therion. 
Usually this is done from the command line in the data directory by typing

|therion|

The full syntax is

|therion [-q] [-L] [-l <log-file>]
        [-s <source-file>] [-p <search-path>]
        [-b/--bezier]
        [-d] [-x] [--use-extern-libs] [<cfg-file>]|

or

|therion [-h/--help]
        [-v/--version]
        [--print-encodings]
        [--print-environment]
        [--print-init-file]
        [--print-library-src]
        [--print-symbols]
        [--print-tex-encodings]
        [--print-xtherion-src]|

\penalty-200
\arguments
  |<cfg-file>| 
  Therion takes only one optional argument: the name of a configuration
  file. If no name is specified |thconfig| in the current directory is used. 
  If there is no |thconfig| file (e.g.~current directory is not a data 
  directory), Therion exits with an error message.
\endarguments

\options
* |-d| =
  Turn on debugging mode. The current implementation creates a 
  temporary directory named |thTMPDIR| (in your system temporary 
  directory) and does not delete any temporary files. 

%* |-g| =
%  Using this option you can generate a new configuration file.
%  If |cfg-file| is not specified therion will use the |thconfig|
%  file. If the destination file exists, it'll be overwritten.
%  Generate a new configuration file. This will be the given 
%  |<cfg-file>| if specified, or |thconfig| in the current directory if not. 
%  If the file already exists, it will be overwritten.
%        
* |-h, --help| =
        Display short help.

%* |-i| =
%        Ignore comments when writing |-g| or |-u| configuration file.
%
* |-L| =
        Do not create a log-file. Normally therion writes all the messages
        into a therion.log file in the current directory.
        
* |-l <log-file>| =
        Change the name of the log file.
        
* |-p <search-path>| =
        This option is used to set the search path (or list of 
	colon-separated paths) which therion uses to find its source
        files (if it doesn't find them in the working directory).

* |-q| =
        Run therion in quiet mode. It will print only warning
        and error messages to STDERR.

* |--print-encodings| =
        Print a list of all supported input encodings.
        
* |--print-tex-encodings| =
        Print a list of all supported encodings for PDF output.
        
* |--print-init-file| =
        Print a default initialization file. For more details
        see the {\it Initialization} section in the {\it Appendix}.

* |--print-environment| =
        Print environment settings for therion.

* |--print-symbols| =
        Print a list of all therion supported map symbols in 
        |symbols.xhtml| file.
        
* |-s <source-file>| =
        Set the name of the source file.
        
%* |-u| =
%        Upgrade the configuration file.
%
* |--use-extern-libs| =
  Don't copy \TeX\ and \MP\ macros to working directory. \TeX\ and \MP\ 
  should search for them on their own. Use with caution.

* |-v, --version| =
  Display version information.        
        
* |-x| =
  Generate file `.xtherion.dat' with additional information for XTherion.
\endoptions

\subsubchapter XTherion---compiler.

XTherion makes it easier to run Therion especially on systems without a command 
line prompt. Compiler window is the default window of XTherion. To run Therion 
it's enough to open a configuration file and press `F9' or `Compile' button. 

XTherion displays messages from Therion in the lower part of the screen.
Each error message is highlighted and is hyperlinked to the source file
where the error occurred.

After a first run there are activated additional menus {\it Survey 
structure} and {\it Map structure}. User may comfortably select a survey or map 
for export by double clicking on some of the items in the tree. Simple click in 
the {\it Survey structure} tree displays some basic information about the 
survey in the {\it Survey info} menu.

\endinput
